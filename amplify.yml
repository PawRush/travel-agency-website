version: 1
frontend:
  phases:
    preBuild:
      commands:
        - cd src
        - npm ci
        - npm run prisma:generate-migration-scripts --workspace=@golobe-demo/backend || true
        - npm run cms-startup --workspace=@golobe-demo/backend || true
    build:
      commands:
        - cd src
        - npm run quickstart:build
  artifacts:
    baseDirectory: src/.output/public
    files:
      - '**/*'
  cache:
    paths:
      - src/node_modules/**/*